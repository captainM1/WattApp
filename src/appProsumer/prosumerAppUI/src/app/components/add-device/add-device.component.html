<app-nav class="desktop"></app-nav>
<app-mob-nav class="mobile"></app-mob-nav>
<div class="outer centriranje">
    <div class="container">
        <h3 class="align-center">Add New Device</h3>
        <div>
            <div class="dropdown d-block d-md-none">
                <select [(ngModel)]="selectedOption" (ngModelChange)="onSelect($event)">
                    <option value="consumer">Consumer</option>
                    <option value="producer">Producer</option>
                    <option value="storage">Storage</option>
                </select>
            </div>
            <div class="row align-center d-none d-md-flex">
                <div class="col-sm"><button type="button" (click)="showConsumer=true; showProducer=false; showStorage=false">Consumer</button></div>
                <div class="col-sm"><button type="button" (click)="showConsumer=false; showProducer=true; showStorage=false">Producer</button></div>
                <div class="col-sm"><button type="button" (click)="showConsumer=false; showProducer=false; showStorage=true">Storage</button></div>
            </div>
            <div *ngIf="showConsumer">
                <form [formGroup]="addConsumerForm" (ngSubmit)="onSubmit()">
                    <div class="row pb-4 forma">
                        <div class="col-sm">
                            <div class="inputi">
                                <div class="form-group pt-3">
                                    <label for="manufacturer">Device Manufacturer</label>
                                    <input class = "form-control" formControlName = "manufacturer" type="text" placeholder="Select manufacturer">
                                </div>
                                <div class="form-group text-right pt-3">
                                    <label for="name">Device Name</label>
                                    <input class = "form-control" formControlName = "name" type="text" placeholder="Insert Name of Device">
                                </div>
                                <div class="form-group pt-3">
                                    <label for="macAddress">Device Mac Address</label>
                                    <input class = "form-control" formControlName = "macAddress" type="text" placeholder="Insert Device Mac Address">
                                </div>
                                <div class="form-group pt-3">
                                    <label for="wattage">Wattage</label>
                                    <input class = "form-control" formControlName = "wattage" type="text" placeholder="Insert Device Wattage">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm">
                            <div class="text-center form-group mt-4 pt-3 pb-3 bg-white permissions mx-auto">
                                <label class="text-center font-weight-bold pb-2" for="toggle-buttons">Permissions</label>
                                <hr>
                                <div id="toggle-buttons" >    
                                    <div class="form-group form-switch pt-3 d-flex justify-content-center">                            
                                        <label class="form-check-label me-4" for="toggle-button-1">Allow DSO To Collect Data</label>
                                        <input class="form-check-input" formControlName = "toggleButton1" type="checkbox" id="toggle-button-1">
                                    </div>
                                    <div class="form-group form-switch d-flex justify-content-center">
                                        <label class="form-check-label me-4" for="toggle-button-2">Allow DSO To Control Consumption Time</label>
                                        <input class="form-check-input" formControlName = "toggleButton2" type="checkbox" id="toggle-button-2" [(ngModel)]="toggle2Checked">
                                    </div>
                                </div> 
                            </div>
                            <div class="pt-4">
                                <button class="mx-2 mt-2"><img src="assets/icons/add.png" alt="icon" style="width:20px; margin-right: 10px;">Add New Rule</button>
                                <button class="mx-2 mt-2" [disabled]="!toggle2Checked"><img src="assets/icons/log-out.png" alt="icon" style="width:15px; color: white; margin-right: 10px;">Add New Requirement</button>
                            </div>
                        </div> 
                    </div>
                    <button type="submit" class="dodavanje btn btn-primary font-weight-bold btn-lock mt-4 mt-2"><img src="assets/icons/moreb.png" alt="icon" style="width:20px; margin-right: 10px;">Add Device</button>
                </form>
            </div>
            <div *ngIf="showProducer">
                <form [formGroup]="addProducerForm" (ngSubmit)="onSubmit()">
                    <app-add-producer></app-add-producer>
                </form>    
            </div>
            <div *ngIf="showStorage">
                <form [formGroup]="addStorageForm" (ngSubmit)="onSubmit()">
                    <app-add-storage></app-add-storage>
                </form>
            </div>
        </div>
    </div>
</div>
